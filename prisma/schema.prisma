generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model WatchedCallsign {
  id       Int     @id @default(autoincrement())
  cid      Int
  callsign String  @db.VarChar(15)
  topdown  Boolean @default(false)
}

model IgnoredCallsign {
  cid Int @id @unique
}

model DiscordEmbed {
  id        Int                  @id @default(autoincrement())
  author    String               @db.VarChar(80)
  title     String               @db.VarChar(256)
  text      String               @db.VarChar(4096)
  color     String               @db.VarChar(7)
  avatar    String               @db.VarChar(256)
  upEmbed   DiscordNotification? @relation(name: "UpEmbed")
  downEmbed DiscordNotification? @relation(name: "DownEmbed")
}

model DiscordNotification {
  id          Int           @id @default(autoincrement())
  name        String        @db.VarChar(50)
  cid         Int
  webhookUrl  String        @db.VarChar(255)
  upEmbed     DiscordEmbed? @relation(name: "UpEmbed", fields: [upEmbedId], references: [id])
  upEmbedId   Int?          @unique
  downEmbed   DiscordEmbed? @relation(name: "DownEmbed", fields: [downEmbedId], references: [id])
  downEmbedId Int?          @unique
}
